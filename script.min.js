const highlight="table-success";var store=JSON.parse(localStorage.getItem("xc2-checklist"));function saveStore(){localStorage.setItem("xc2-checklist",JSON.stringify([...store]))}function resetAll(){store.clear(),$("tr[data-uniqueid]").removeClass(highlight),$("span[id$='-completed']").text("0"),saveStore()}function toggleElement(t,e){var l=$(t).attr("data-uniqueid"),i=parseInt($(e).text(),10);store.has(l)?(store.delete(l),$(t).removeClass(highlight),$(e).text(i-1)):(store.add(l),$(t).addClass(highlight),$(e).text(i+1)),saveStore()}function importError(){$("#importModal").modal("hide"),$("#import-fail").collapse("show"),setTimeout((()=>{$("#import-fail").collapse("hide")}),5e3)}function importProgress(){var t=$("#import-code").val();if(t){var e=LZString.decompressFromBase64(t);if(e){try{JSON.parse(e)}catch(t){return void importError()}localStorage.setItem("xc2-checklist",e),$("#importModal").modal("hide"),$("#import-success").collapse("show")}else importError()}else importError()}store=null==store?new Set:new Set(store);var tables=["quests","quests-dlc","quests-blade","blades","blades-ng","blades-dlc","shopdeeds","uniquemonsters","hearttoheart","mercmissions","secretareas","expman","bspon","foorara","doubloons"],defs={"quests-fil":!0,"quests-col":[{field:"name",title:"Name",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"area",title:"Area",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"location",title:"Location",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"giver",title:"Giver",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"prereqs",title:"Prerequisites",sortable:!1,filterControl:"input",filterStrictSearch:!1}],"quests-dlc-fil":!0,"quests-dlc-col":[{field:"name",title:"Name",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"location",title:"Location",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"prereqs",title:"Prerequisites",sortable:!1,filterControl:"input",filterStrictSearch:!1},{field:"description",title:"Description",sortable:!1}],"quests-blade-fil":!0,"quests-blade-col":[{field:"name",title:"Name",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"blade",title:"Blade",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"location",title:"Location",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"prereqs",title:"Prerequisites",sortable:!1,filterControl:"input",filterStrictSearch:!1},{field:"description",title:"Description",sortable:!1}],"blades-fil":!0,"blades-col":[{field:"blade",title:"Blade",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"role",title:"Role",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"stat",title:"Stat Modifier",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"weapon",title:"Weapon",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"element",title:"Element",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"acquisition",title:"Acquisition",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"blades-ng-fil":!0,"blades-ng-col":[{field:"blade",title:"Blade",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"role",title:"Role",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"stat",title:"Stat Modifier",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"weapon",title:"Weapon",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"element",title:"Element",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"acquisition",title:"Acquisition",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"blades-dlc-fil":!0,"blades-dlc-col":[{field:"blade",title:"Blade",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"role",title:"Role",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"stat",title:"Stat Modifier",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"weapon",title:"Weapon",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"element",title:"Element",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"acquisition",title:"Acquisition",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"shopdeeds-fil":!0,"shopdeeds-col":[{field:"shop",title:"Shop",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"area",title:"Area",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"benefit",title:"Benefit",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"numitems",title:"# of Items Sold",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"merc",title:"Required Merc Mission(s)",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"uniquemonsters-fil":!0,"uniquemonsters-col":[{field:"name",title:"Name",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"level",title:"Level",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"species",title:"Species",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"nation",title:"Nation",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"location",title:"Location",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"spawntime",title:"Spawntime",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"hearttoheart-fil":!0,"hearttoheart-col":[{field:"name",title:"Name",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"area",title:"Area",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"location",title:"Location",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"party",title:"Party",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"notes",title:"Notes",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"mercmissions-fil":!0,"mercmissions-col":[{field:"name",title:"Name",sortable:!0,filterControl:"input",filterStrictSearch:!1},{field:"area",title:"Area",sortable:!0,filterControl:"select",filterStrictSearch:!0},{field:"notes",title:"Notes",sortable:!0,filterControl:"input",filterStrictSearch:!1}],"secretareas-fil":!1,"secretareas-col":[{field:"name",title:"Name",sortable:!0},{field:"location",title:"Location",sortable:!0},{field:"description",title:"Description"}],"expman-fil":!1,"expman-col":[{field:"name",title:"Name",sortable:!0},{field:"location",title:"Location",sortable:!0},{field:"mark",title:"Marker",sortable:!0},{field:"description",title:"Description"}],"bspon-fil":!1,"bspon-col":[{field:"id",title:"#",sortable:!0},{field:"location",title:"Location",sortable:!0},{field:"mark",title:"Marker",sortable:!0},{field:"description",title:"Description"}],"foorara-fil":!1,"foorara-col":[{field:"id",title:"#"},{field:"location",title:"Location"},{field:"mark",title:"Marker"},{field:"description",title:"Description"}],"doubloons-fil":!1,"doubloons-col":[{field:"id",title:"#",sortable:!0},{field:"location",title:"Location",sortable:!0},{field:"mark",title:"Marker",sortable:!0},{field:"description",title:"Description"}],"trust-col":[{field:"name",title:"Name",sortable:!0},{field:"category",title:"Category",sortable:!0},{field:"trust",title:"Trust",sortable:!0},{field:"location",title:"Location",sortable:!0},{field:"shop",title:"Shop",sortable:!0},{field:"cost",title:"Cost (at Dev Lv.5)",sortable:!0}]};$((function(){var t;$.getJSON("data.min.json",(function(e){t=e;for(let e of tables)!function(e){$("#"+e+"-table").bootstrapTable({data:t[e],striped:!0,uniqueId:"uid",filterControl:defs[e+"-fil"],hideUnusedSelectOptions:!0,columns:defs[e+"-col"],onClickRow:function(t,l,i){toggleElement(l,$("#"+e+"-completed"))},onPostBody:function(t){var l=0;t.forEach((function(t){store.has(t.uid)&&(++l,$("tr[data-uniqueid='"+t.uid+"']").addClass(highlight))})),$("#"+e+"-completed").text(l),$("#"+e+"-total").text(t.length)}})}(e);$("#trust-table").bootstrapTable({data:t.trust,striped:!0,columns:defs["trust-col"]})})),$("#exportModal").on("show.bs.modal",(()=>{var t=JSON.stringify([...store]),e=LZString.compressToBase64(t);$(this).find("#export-code").val(e)}));new bootstrap.Popover($("#import-save"),{placement:"top",title:"Are you sure?",html:!0,sanitize:!1,content:'This will overwrite your current progress<div class="btn-group btn-group-sm" role="group" aria-label="Confirmation"><button type="button" class="btn btn-sm btn-success" id="popover-submit">Yes, do it</button><button type="button" class="btn btn-sm btn-danger" id="popover-cancel">No, get me out of here!</button></div>'});$("#import-save").on("shown.bs.popover",(()=>{$("#popover-cancel").click((()=>{$("#importModal").modal("hide")})),$("#popover-submit").click((()=>{importProgress()}))})),$("#export-copy").tooltip(),$("#export-copy").click((()=>{$("#export-code").select(),document.execCommand("copy")})),$("#reset-yes").click((()=>{resetAll()}))}));